#<!DOCTYPE html>
#<html lang="id">
#<head>
#  <meta charset="UTF-8" />
#  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
#  <title>Brandomusic</title>
#  <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.5.0/styles/default.min.css">
#  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.5.0/highlight.min.js"></script>
#  <script>hljs.initHighlightingOnLoad();</script>
#  <style>
#    body { font-family: monospace; background: #f5f5f5; margin: 2rem; }
#    code { display: block; white-space: pre-wrap; background: #0b0c0e; color: #f0f0f0; padding: 1rem; border-radius: 5px; }
#    h2, h3 { font-family: sans-serif; }
#    footer { font-size: 0.8rem; margin-top: 2rem; }
#  </style>
#</head>
#<body>
#  <h2>Brandomusic – Terminal Music Player</h2>
#  <p>
#    <strong>URL:</strong> <a href="https://luisadha.github.io/brandomusic">luisadha.github.io/brandomusic</a><br/>
#    Gunakan skrip ini untuk memutar musik langsung dari <code>~/storage/music</code> di Termux.
#  </p>
#  <h3>Cara Pakai:</h3>
#  <pre><code class="bash">. &lt;(curl -Ls https://luisadha.github.io/brandomusic)</code></pre>
#
#  <h3>Kode Bash:</h3>
#  <pre><code class="bash">
#!/usr/bin/env bash
set -xv
set -eu
shopt -s nullglob globstar
set +o noclobber

MUSIC_DIR="${HOME}/storage/music"
IFS=$'\n'
format='audio/mp3'

# Cek dan ambil file MP3
files=("${MUSIC_DIR}"/*.mp3)
if (( ${#files[@]} == 0 )); then
  echo "Tidak ada file MP3 ditemukan."
  exit 1
fi

# Ambil file acak
pick="${files[RANDOM % ${#files[@]}]}"
tmp="/storage/download/$(basename "$pick")"

# Salin ke download agar bisa dibuka
cp -f "$pick" "$tmp" &>/dev/null || {
  echo "Gagal menyalin file ke /storage/download"
  exit 1
}

echo -n "Siap mendengarkan musik? (y/N) "
read -s -n 1 answer < /dev/tty;
echo

if [[ "$answer" =~ [Yy] ]]; then
  echo "Membuka lagu: $(basename "$pick")"
  xdg-open --content-type "$format" "$tmp"
  sleep 1
else
  echo "O-K tidak apa-apa, mungkin lain kali."
  rm -f "$tmp"
fi

# Hapus file sementara dan keluar
rm -f "$tmp"
set +eu
set +vx
#  </code></pre>
#
#  <footer>
#    Copyright (C) 2021–2025 <a href="https://luisadha.my.id">luisadha.my.id</a> — <a href="https://github.com/luisadha/brandomusic">GitHub Project</a>
#  </footer>
#</body>
#</html>
